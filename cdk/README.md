# CDK L1 Dev and Publishing


## Dev Process

1. Install all the dependencies - `yarn, node, cdk-import`
2. Let's take an example For creating cdk for `private-endpoint` resource. 
Make sure cfn-resources/private-endpoint has the latest schema. 
3. Execute `./cdk.sh private-endpoint`
4. This would generate the scaffolding using projen and 
would also emit autogenerated index.ts in the src directory.
5. Update the README.md file as per the CDK library requirements.

## Release and Publishing

### Manual Release
1. projenrc is set to do manual release. 
2. The release process is based on *Semantic Versioning* and *Conventional Commits* (https://www.conventionalcommits.org/).
3. Make sure to follow the above guidelines in order to bump appropriate part of the version(*MAJOR, MINOR, PATCH*).
4. Commit the changes with the message based on the conventional commits guidelines. 

### Publish
1. Make sure to create an NPM account and generate NPM token.
2. `export NPM_TOKEN=<>` to generated token.
3. You may also need to `export NPM_ACCESS_LEVEL=public` in case it is not set in projenrc
4. Execute `./publish.sh private-endpoint` to publish the resource.

### Tagging
1. The version is bumped based on the previous release version which is the tag in the git repository.
2. Release task would look for previous tag in the git repository and bump the version based on the last commit message.
