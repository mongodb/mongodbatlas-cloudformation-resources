{
  "typeName": "MongoDB::Atlas::OrgServiceAccount",
  "description": "Creates and manages a Service Account for an organization.",
  "sourceUrl": "https://github.com/mongodb/mongodbatlas-cloudformation-resources",
  "definitions": {
    "Secret": {
      "type": "object",
      "properties": {
        "Id": {
          "type": "string",
          "description": "Unique identifier of the secret."
        },
        "CreatedAt": {
          "type": "string",
          "description": "Date and time that the secret was created on."
        },
        "ExpiresAt": {
          "type": "string",
          "description": "Date and time when the secret expires."
        },
        "LastUsedAt": {
          "type": "string",
          "description": "Date and time when the secret was last used."
        },
        "MaskedSecretValue": {
          "type": "string",
          "description": "Masked value of the secret."
        },
        "Secret": {
          "type": "string",
          "format": "password",
          "description": "The secret value. Only returned on create."
        }
      },
      "additionalProperties": false
    }
  },
  "properties": {
    "Profile": {
      "type": "string",
      "description": "Profile used to provide credentials information.",
      "default": "default"
    },
    "OrgId": {
      "type": "string",
      "description": "Unique 24-hexadecimal digit string that identifies the organization.",
      "maxLength": 24,
      "minLength": 24,
      "pattern": "^([a-f0-9]{24})$"
    },
    "Name": {
      "type": "string",
      "description": "Human-readable name for the Service Account."
    },
    "Description": {
      "type": "string",
      "description": "Human readable description for the Service Account."
    },
    "Roles": {
      "type": "array",
      "description": "List of organization-level roles for the Service Account.",
      "items": {
        "type": "string"
      },
      "minItems": 1
    },
    "SecretExpiresAfterHours": {
      "type": "integer",
      "description": "Expiration time of the new Service Account secret in hours.",
      "minimum": 1
    },
    "ClientId": {
      "type": "string",
      "description": "The Client ID of the Service Account."
    },
    "CreatedAt": {
      "type": "string",
      "description": "Date and time that the Service Account was created on."
    },
    "Secrets": {
      "type": "array",
      "description": "List of secrets associated with the Service Account.",
      "items": {
        "$ref": "#/definitions/Secret"
      }
    }
  },
  "required": [
    "OrgId",
    "Name",
    "Description",
    "Roles",
    "SecretExpiresAfterHours"
  ],
  "readOnlyProperties": [
    "/properties/ClientId",
    "/properties/CreatedAt",
    "/properties/Secrets"
  ],
  "createOnlyProperties": [
    "/properties/OrgId",
    "/properties/Profile",
    "/properties/SecretExpiresAfterHours"
  ],
  "primaryIdentifier": [
    "/properties/OrgId",
    "/properties/ClientId",
    "/properties/Profile"
  ],
  "handlers": {
    "create": {
      "permissions": [
        "secretsmanager:GetSecretValue"
      ]
    },
    "read": {
      "permissions": [
        "secretsmanager:GetSecretValue"
      ]
    },
    "update": {
      "permissions": [
        "secretsmanager:GetSecretValue"
      ]
    },
    "delete": {
      "permissions": [
        "secretsmanager:GetSecretValue"
      ]
    },
    "list": {
      "permissions": [
        "secretsmanager:GetSecretValue"
      ]
    }
  },
  "writeOnlyProperties": [
    "/properties/Secrets/*/Secret"
  ],
  "tagging": {
    "taggable": false
  },
  "additionalProperties": false
}
