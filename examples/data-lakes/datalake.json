{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "This template creates an encryption at rest on the MongoDB Atlas API, this will be billed to your Atlas account.",
  "Parameters": {
    "Profile": {
      "Type": "String",
      "Description": "",
      "Default": "default",
      "ConstraintDescription": ""
    },
    "ProjectId": {
      "Type": "String",
      "Description": "",
      "Default": "",
      "ConstraintDescription": ""
    },
    "RoleID": {
      "Type": "String",
      "Description": "",
      "Default": "",
      "ConstraintDescription": ""
    },
    "IamAssumedRoleARN": {
      "Type": "String",
      "Description": "",
      "Default": "",
      "ConstraintDescription": ""
    },
    "IamUserARN": {
      "Type": "String",
      "Description": "",
      "Default": "",
      "ConstraintDescription": ""
    },
    "ExternalId": {
      "Type": "String",
      "Description": "",
      "Default": "",
      "ConstraintDescription": ""
    },
    "TestS3Bucket": {
      "Type": "String",
      "Description": "",
      "Default": "",
      "ConstraintDescription": ""
    },
    "TenantName": {
      "Type": "String",
      "Description": "",
      "Default": "",
      "ConstraintDescription": ""
    },
    "Region": {
      "Type": "String",
      "Description": "",
      "Default": "MUMBAI_IND",
      "ConstraintDescription": ""
    }
  },
  "Mappings": {},
  "Resources": {
    "DataLake": {
      "Type": "MongoDB::Atlas::DataLakes",
      "Properties": {
        "ProjectId": {
          "Ref": "ProjectId"
        },
        "TenantName": {
          "Ref": "TenantName"
        },
        "CloudProviderConfig": {
          "Aws": {
            "ExternalId": {
              "Ref": "ExternalId"
            },
            "IamAssumedRoleARN": {
              "Ref": "IamAssumedRoleARN"
            },
            "IamUserARN": {
              "Ref": "IamUserARN"
            },
            "RoleId": {
              "Ref": "RoleID"
            },
            "TestS3Bucket": {
              "Ref": "TestS3Bucket"
            }
          }
        },
        "DataProcessRegion": {
          "CloudProvider": "AWS",
          "Region": {
            "Ref": "Region"
          }
        },
        "Profile": {
          "Ref": "Profile"
        }
      }
    }
  },
  "Outputs": {
    "DataLake": {
      "Description": "Datalake object",
      "Value": {
        "Fn::Select": [
          0,
          {
            "Fn::GetAtt": [
              "DataLake",
              "Hostnames"
            ]
          }
        ]
      }
    }
  }
}
